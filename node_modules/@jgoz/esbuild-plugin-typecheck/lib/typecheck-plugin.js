"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.typecheckPlugin = void 0;
const typecheck_runner_1 = require("./typecheck-runner");
function typecheckPlugin({ configFile, watch: forceWatch, ...options } = {}) {
    return {
        name: 'typecheck-plugin',
        setup(build) {
            const { absWorkingDir = process.cwd(), tsconfig, watch } = build.initialOptions;
            const runner = new typecheck_runner_1.TypecheckRunner({
                ...options,
                absWorkingDir,
                configFile: configFile ?? tsconfig,
                watch: !!forceWatch || !!watch,
            });
            build.onStart(() => {
                runner.start();
            });
        },
    };
}
exports.typecheckPlugin = typecheckPlugin;
//# sourceMappingURL=typecheck-plugin.js.map